var UtilManager = (function(){

	/* converts object to query string */
	var fnObjectToQueryString = function(obj){
		var str = "?";
		for(key of Object.keys(obj)){
			str += key+ "="+ obj[key]+ "&";
		}
		return str.substring(0,str.length - 1);
	}


	/* filters blog Images from HTML */
	var filterBlogImages = function(htmlContent){
		//copy paste from other website.
		var imgArr = [];
		var imgTags = htmlContent.match(/<img\s[^>]*?src\s*=\s*['\"]([^'\"]*?)['\"][^>]*?>/g);
		if(imgTags != undefined && imgTags.length > 0 ){
			for(var i=0 ; i < imgTags.length ; i++){
				var imgURL = imgTags[i].match(/(https?:\/\/.*\.(?:png|jpg))/ig);
				if(imgURL != undefined && imgURL.length > 0){
					var picURL = imgURL[0];
					if(picURL.indexOf('blogspot.com')){
					    var splitter = picURL.split("/")[7];
					    picURL = picURL.replace(splitter,"s1600");
					}
					imgArr.push(picURL);
				}
			}
		}
		return imgArr;
	} 

	/* removes stop words from the title */
	var removeStopWords = function(string){
		var stopWords = ["Telugu","Tamil","Actress","Acress","CelebsNext","Photoshoot","Cinema","Photos","Photo","Pictures","Picture","Tollywood","Kollywood","Movies","Movie","Latest","Saree","Gallery","Dress","Event","Audio","Stills","Still"," hot ","Navel","Cleavage","Boobs","Exposing","Desi ","Heroine","Heroin", "Images","Wallpapers","Wallpaper","Cute","Spicy","New ","Function","Success Meet","Teaser Launch","Launch "," Hot","Press Meet"," Launch","Sexy "];
		var rExp;
		for(word of stopWords){
			rExp = new RegExp(word,"gi");
			string = string.replace(rExp," ").trim();
		}
		string = removeNoise(string);
		string = string.replace(/\s/g," ").trim();
		return string;
	}

	function removeNoise(string){
		var noiseWords = ["%2B","%25"];
		var rExp;
		for(word of noiseWords){
			rExp = new RegExp(word,"gi");
			string = string.replace(rExp," ").trim();
			string = string.replace(/\W+/g," ").trim();
			string = string.replace(" jpg","").trim();
			string = string.replace(/\s/g," ").trim();
		}
		return string;
	}

	var searchObjectArray = function(arr,key,value){
	    var obj = {};
	    for(element of arr){
	        if(element.hasOwnProperty(key)){
	            if(value == element[key]){
	                obj = element[key];
	            }
	        }
	    }
	   return obj;
	}

	return {
		objToQueryString : fnObjectToQueryString,
		filterBlogImages : filterBlogImages,
		removeStopWords : removeStopWords,
		searchObjectArray : searchObjectArray
	}
	
})();


module.exports = UtilManager;